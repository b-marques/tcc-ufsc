\chapter[Introdução]{Introdução}

Até a última década, o desempenho das arquiteturas utilizadas na área de Computação de Alto Desempenho (\textit{High Performance Computing} - HPC) tem sido quase exclusivamente quantificado pelo seu poder de processamento. No entanto, a eficiência energética está sendo considerada recentemente tão importante quanto o desempenho e tornou-se um aspecto crítico para o desenvolvimento de sistemas escaláveis~\cite{francesquini:hal-01092325}. Portanto a pesquisa e o desenvolvimento científico nesta área com enfoque na redução do consumo de energia tem se tornado de extrema importância para o avanço tecnológico.

Assim, é notório o surgimento de uma nova classe de processadores, os denominados processadores \textit{manycore}, com mais de centenas de núcleos de processamento e de baixo consumo de energia, capazes de lidar com o paralelismo dados e tarefas, como o \mppa~\cite{castro2013}. 
Apesar dos benefícios oriundos dos processadores \textit{manycore}, eles também trazem desafios para a programação de aplicações paralelas devido às suas características arquiteturais~\cite{castro:hal-01273153}. Uma das formas de simplificar o desenvolvimento de aplicações paralelas, abstraindo os detalhes arquiteturais e de programação de baixo nível, é através da utilização de padrões paralelos ou esqueletos algorítimicos~\cite{COLE2004389}.

Um destes padrões é denominado estêncil. Este padrão consiste em varrer os elementos de um dado \textit{array} de entrada de \textit{n}-dimensões, e modificar o valor de cada elemento com base nos valores dos elementos vizinhos, produzindo assim um \textit{array} de saída de \textit{n}-dimensões com valores modificados. Além disso, essa etapa de varredura e modificação de valores pode ser realizada iterativamente, na qual o \textit{array} de saída de uma iteração, será o \textit{array} de entrada da iteração seguinte. É válido destacar que muitos destes padrões estão presentes nas mais diversas áreas do conhecimento, como física, matemática, processamento de imagens, entre outros~\cite{Holewinski:2012:HCG:2304576.2304619}.

Dentre os \fws propostos, o \pskel se destaca por prover uma abstração para ambientes heterogêneos de programação, que contam com a presença de processadores \textit{multicore} e placas gráficas. Além disso, foram observados ganhos na performace média de até 76\%~\cite{CPE:CPE3479}.

Com a necessidade e importância de cunho científico do desenvolvimento de aplicações paralelas nos processadores \textit{manycore}, foi proposta uma adaptação do \textit{framework} \pskel para que ele dê suporte ao processador \mppa. Os resultados obtidos com o \pskel no \mppa foram promissores, apresentando uma redução no consumo energético de aplicações estêncil quando comparado  com execuções em um processador de alto desempenho Intel Broadwell~\cite{wscad2017}.

Todavia, foi observado que o tempo desperdiçado na comunicação das aplicações do \mppa é elevado e impacta diretamente nos testes e experimentos realizados, comunicação está que ocorre através de \textit{Networks-on-Chip} (NoCs) de dados e de controle. Decorrente desta estrutura, o delay de comunicação entre elementos fisicamente mais distantes na rede será maior do que elementos mais próximos.

Além disso, a atual API de comunicação utilizada no \pskel para o \mppa é similar ao modelo clássico POSIX de baixo nível para \textit{Inter-Process Communication} (IPC), o que dificulta o desenvolvimento de rotinas de comunicação e expõe essas rotinas a possíveis perdas de desempenho não trivialmente detectáveis. A nova API de comunicação assíncrona desenvolvida e disponibilizada pelos desenvolvedores do processador, eleva o nível de abstração dessas rotinas de comunicação com implementações otimizadas para o processador, acarretando em maior robustez e desempenho na utilização da NoC. Com isso, nota-se a importância da revisão e estudo da implementação atual da adaptação do \textit{framework} \pskel para o \mppa, visando encontrar espaços para otimização e ganho de desempenho, que impactarão diretamente no gasto energético do processador, que já se mostrou promissor quando comparado ao Intel Broadwell. 
% ---------------------------------

% ---------------------------------
\section{Objetivos}
\label{sec:objetivos}
A medida que se reduz o número de comunicações e sincronizações, através do aumento do número de elementos processados a cada iteração de uma aplicação de computação estêncil no \mppa é observada a queda no tempo de sua execução e por consequência a redução do consumo de energia~\cite{wscad2017}.

\subsection{Objetivos Gerais}
\label{subsec:objetivos-gerais}

 Portanto, uma vez identificado que os gastos de comunicação são fatores relevantes para a influência do consumo de energia e tempo de execução das aplicações, este \textit{Trabalho de Conclusão de Curso} tem como objetivo geral propor otimizações na comunicação de dados para o \fw \pskel adaptado para o \mppa visando o ganho de desempenho e redução de consumo de energia pelas aplicações paralelas de padrão estêncil no \mppa.

\subsection{Objetivos Especificos}
\label{subsec:objetivos-específicos}

Os objetivos específicos deste trabalho são: 

\begin{enumerate}
\item Estudar a nova API de comunicação assíncrona disponibilizada pelo fabricante do processador e realizar as modificações de código necessárias no \pskel para fazer uso da mesma;
\item Propor e implementar otimizações na comunicação e na distribuição de dados entre os elementos de processamento a fim de se obter ganhos de desempenho e redução no consumo de energia;
\item Realizar experimentos com aplicações estêncil para medir o desempenho e a eficiência energética das otimizações propostas, comparando resultados obtidos com outros processadores \textit{multicore} e processadores gráficos.
\end{enumerate}